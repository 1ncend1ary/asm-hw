Лабораторная 2.

Написать функцию, выполняющую декодирование LZW сжатых данных (вариант из стандарта TIFF).

Прототип функции:

size_t lzw_decode(const uint8_t *in, size_t in_size, uint8_t *restrict out, size_t out_size);

Возвращаемое значение: количество декодированных символов или -1 при ошибке.

Оцениваться будет как правильность работы, так и скорость. Представляют интерес как вариант, который никогда не выходит за указанные размеры буферов, так и вариант, предполагающий корректность входных данных (если это обеспечивает существенное ускорение относительно первого варианта).

32 или 64-битный код. Конвенция вызова: cdecl или fastcall64 соответственно. Не забывайте сохранять нужные регистры, если вы их изменяете. Функция должна быть реализована в одном .asm файле и не использовать каких-либо внешних функций (использовать свои дополнительные функции в том же файле – разрешается). Разрешается использовать любые расширенные команды, поддерживаемые процессорами архитектуры Skylake, если это даёт существенное ускорение.

Пример входных и выходных данных:
